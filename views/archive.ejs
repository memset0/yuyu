<%- include('header', { template: 'archive' }) %>

<div id="archive" class="archive">
	<% articles.forEach(file => { %>
	<% article = file.render({submodule: {config: true, summary: true, breadcrumb: true}}).res.arguments.article %>
	<div class="archive-article" style="margin-bottom: 2em;">

		<div style="position: relative; height: 1rem; margin-bottom: 2em;">
			<% if (article && article.breadcrumb && article.breadcrumb.length) { %>
			<div class="ui breadcrumb" style="position:absolute; left: 0;">
				<% let len = article.breadcrumb.length; %>
				<% for (let i = 0; i < len - 1; i++) { %>
				<a href="<%- article.breadcrumb[i].href %>" class="section"><%= article.breadcrumb[i].name %></a>
				<i class="right angle icon divider"></i>
				<% }%>
				<a href="<%- article.breadcrumb[len - 1].href %>" class="section"><%= article.breadcrumb[len - 1].name %></a>
			</div>
			<% } %>
			<div style="position:absolute; right: 0; font-size: 1rem; font-weight: bold;">
				<%= article.title %>
			</div>
		</div>

		<div class="ui card" style="margin-top: 1em; margin-bottom: 1em;">
			<% if (article.date || article.link || (global.status == 'online' && config.option.allow_edit)) { %>
				<div class="extra content">
					<% if (article.date) { %>
						<span class="left floated">
							<i class="calendar icon"></i>
							<%= article.date.format('YYYY-MM-DD HH:mm') %>
						</span>
					<% } %>
					<% if (article.link || (global.status == 'online' && config.option.allow_edit)) { %>
						<span class="right floated" style="margin-left: 1em">
							<% if (article.link) { %>
								<a href="<%= article.link %>" target="_blank">
									<i class="external link alt icon"></i>
									<%= article.linkName %>
								</a>
							<% } %>
							<% if (global.status == 'online' && config.option.allow_edit) { %>
								<a href="/edit?p=<%= article.uri %>" target="_blank" style="margin-left: 1em">
									<i class="edit icon"></i>
									Edit
								</a>
							<% } %>
						</span>
					<% } %>
				</div>
			<% } %>
			<div class="content">
				<div class="md" style="overflow: hidden; font-size: 1.08em;">
					<%- article.content %>
				</div>
			</div>
			<% if (article.tag) { %>
				<div class="extra content">
					<% article.tag.forEach(tag => { %>
						<span class="article-tag">
							<i class="tag icon"></i>
							<%= tag %>
						</span>
					<% }); %>
				</div>
			<% } %>
		</div>
	</div>
	<% }) %>
</div>

<%- include('footer') %>